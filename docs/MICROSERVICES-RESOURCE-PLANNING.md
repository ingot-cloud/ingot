# å¾®æœåŠ¡èµ„æºè§„åˆ’æŒ‡å—

> é’ˆå¯¹å¤šæœåŠ¡å…±å­˜åœºæ™¯çš„èµ„æºåˆ†é…å’Œé…ç½®ä¼˜åŒ–

## ğŸ“Š å…¸å‹éƒ¨ç½²æ¶æ„

### å•æœºå¤šæœåŠ¡éƒ¨ç½²ï¼ˆ8C16Gï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         8C16G ç‰©ç†æœåŠ¡å™¨                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç³»ç»Ÿ + Docker + å…¶ä»–å¼€é”€ï¼š2G               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Gateway (ç½‘å…³æœåŠ¡)       2.5G      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  Auth (è®¤è¯æœåŠ¡)          2.5G      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  PMS (æƒé™ç®¡ç†æœåŠ¡)       2.5G      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  Member (ç”¨æˆ·æœåŠ¡)        2.5G      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  å…¶ä»–æœåŠ¡                 2G        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  MySQL: 1G  â”‚  Redis: 512M  â”‚  å…¶ä»–: 500M â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ èµ„æºåˆ†é…ç­–ç•¥

### å†…å­˜åˆ†é…ï¼ˆ16G æ€»å†…å­˜ï¼‰

| ç»„ä»¶ | åˆ†é… | å æ¯” | è¯´æ˜ |
|------|------|------|------|
| **ç³»ç»Ÿé¢„ç•™** | 2G | 12.5% | OS + Docker + ç¼“å†² |
| **Gateway** | 2.5G | 15.6% | æµé‡å…¥å£ï¼Œé«˜å¹¶å‘ |
| **Auth** | 2.5G | 15.6% | è®¤è¯é¢‘ç¹ï¼ŒToken ç”Ÿæˆ |
| **PMS** | 2.5G | 15.6% | ä¸šåŠ¡æœåŠ¡ |
| **Member** | 2.5G | 15.6% | ä¸šåŠ¡æœåŠ¡ |
| **MySQL** | 1G | 6.25% | å¦‚åœ¨åŒæœº |
| **Redis** | 512M | 3.1% | å¦‚åœ¨åŒæœº |
| **å…¶ä»–æœåŠ¡** | 2G | 12.5% | å¼¹æ€§åˆ†é… |
| **é¢„ç•™ç¼“å†²** | 512M | 3.1% | åº”å¯¹çªå‘ |

### CPU åˆ†é…ï¼ˆ8 æ ¸å¿ƒï¼‰

| ç»„ä»¶ | CPU é™åˆ¶ | è¯´æ˜ |
|------|----------|------|
| **Gateway** | 2 æ ¸ | æµé‡å…¥å£ |
| **Auth** | 2 æ ¸ | è®¡ç®—å¯†é›†ï¼ˆåŠ å¯†ï¼‰ |
| **PMS** | 1.5 æ ¸ | ä¸šåŠ¡æœåŠ¡ |
| **Member** | 1.5 æ ¸ | ä¸šåŠ¡æœåŠ¡ |
| **å…¶ä»–** | 1 æ ¸ | å¼¹æ€§åˆ†é… |

**æ³¨æ„**ï¼šCPU é™åˆ¶æ˜¯è½¯é™åˆ¶ï¼Œå¯ä»¥è¶…é¢åˆ†é…ï¼ˆæ€»å’Œå¯ä»¥ > 8 æ ¸ï¼‰

---

## âš™ï¸ å„æœåŠ¡é…ç½®å»ºè®®

### 1. Gatewayï¼ˆç½‘å…³æœåŠ¡ï¼‰

#### JVM é…ç½®
```dockerfile
ENV JAVA_OPTS="-server \
               -Xms2g \
               -Xmx2g \
               -XX:MetaspaceSize=256m \
               -XX:MaxMetaspaceSize=256m \
               -XX:MaxDirectMemorySize=256m \
               -XX:+UseG1GC \
               -XX:MaxGCPauseMillis=100 \
               -XX:InitiatingHeapOccupancyPercent=45 \
               -XX:+UseContainerSupport \
               -XX:MaxRAMPercentage=80.0 \
               -XX:+AlwaysPreTouch"
```

#### Docker Compose é…ç½®
```yaml
gateway:
  mem_limit: 2560m
  mem_reservation: 2g
  cpus: '2.0'
  environment:
    JAVA_OPTS: "-Xms2g -Xmx2g"
```

#### çº¿ç¨‹æ± é…ç½®ï¼ˆapplication.ymlï¼‰
```yaml
server:
  undertow:
    threads:
      io: 4          # Gateway éœ€è¦è¾ƒå¤š IO çº¿ç¨‹
      worker: 200    # é™ä½å·¥ä½œçº¿ç¨‹æ•°
```

#### è¿æ¥æ± é…ç½®
```yaml
# Gateway ä¸ç›´æ¥è¿æ•°æ®åº“ï¼Œä¸»è¦æ˜¯ HTTP å®¢æˆ·ç«¯
spring:
  cloud:
    gateway:
      httpclient:
        pool:
          max-connections: 500    # é™ä½æœ€å¤§è¿æ¥æ•°
```

---

### 2. Authï¼ˆè®¤è¯æœåŠ¡ï¼‰

#### JVM é…ç½®
```dockerfile
ENV JAVA_OPTS="-server \
               -Xms2g \
               -Xmx2g \
               -XX:MetaspaceSize=256m \
               -XX:MaxMetaspaceSize=256m \
               -XX:MaxDirectMemorySize=256m \
               -XX:+UseG1GC \
               -XX:MaxGCPauseMillis=150 \
               -XX:+UseContainerSupport \
               -XX:MaxRAMPercentage=80.0"
```

#### Docker Compose é…ç½®
```yaml
auth:
  mem_limit: 2560m
  mem_reservation: 2g
  cpus: '2.0'
```

#### æ•°æ®åº“è¿æ¥æ± é…ç½®
```yaml
spring:
  datasource:
    druid:
      initial-size: 10
      min-idle: 10
      max-active: 50     # è®¤è¯æœåŠ¡ï¼Œè¿æ¥æ•°é€‚ä¸­
      max-wait: 5000
```

#### çº¿ç¨‹æ± é…ç½®
```yaml
server:
  undertow:
    threads:
      io: 4
      worker: 150      # è®¤è¯æœåŠ¡ï¼Œé€‚ä¸­
```

---

### 3. PMS/Memberï¼ˆä¸šåŠ¡æœåŠ¡ï¼‰

#### JVM é…ç½®
```dockerfile
ENV JAVA_OPTS="-server \
               -Xms2g \
               -Xmx2g \
               -XX:MetaspaceSize=256m \
               -XX:MaxMetaspaceSize=384m \
               -XX:MaxDirectMemorySize=256m \
               -XX:+UseG1GC \
               -XX:MaxGCPauseMillis=200 \
               -XX:InitiatingHeapOccupancyPercent=45 \
               -XX:+UseContainerSupport \
               -XX:MaxRAMPercentage=80.0 \
               -XX:+AlwaysPreTouch \
               -XX:+HeapDumpOnOutOfMemoryError \
               -XX:HeapDumpPath=/app/logs/heapdump.hprof \
               -Xlog:gc*:file=/app/logs/gc.log:time,level,tags:filecount=5,filesize=10M"
```

#### Docker Compose é…ç½®
```yaml
pms:
  mem_limit: 2560m
  mem_reservation: 2g
  cpus: '1.5'
  
member:
  mem_limit: 2560m
  mem_reservation: 2g
  cpus: '1.5'
```

#### æ•°æ®åº“è¿æ¥æ± é…ç½®
```yaml
spring:
  datasource:
    druid:
      initial-size: 10
      min-idle: 10
      max-active: 50     # æ¯ä¸ªæœåŠ¡ 50 ä¸ªè¿æ¥
      max-wait: 5000
      remove-abandoned: true
      remove-abandoned-timeout: 60
```

#### çº¿ç¨‹æ± é…ç½®
```yaml
server:
  undertow:
    threads:
      io: 4
      worker: 120      # ä¸šåŠ¡æœåŠ¡ï¼Œé€‚ä¸­

spring:
  task:
    execution:
      pool:
        core-size: 10
        max-size: 50    # å¼‚æ­¥çº¿ç¨‹æ± ä¹Ÿè¦é™ä½
        queue-capacity: 200
```

---

## ğŸ“ å®¹é‡è®¡ç®—

### æ•°æ®åº“è¿æ¥æ•°è®¡ç®—

å‡è®¾ MySQL é…ç½® `max_connections = 500`ï¼š

| æœåŠ¡ | å®ä¾‹æ•° | æ¯å®ä¾‹è¿æ¥ | æ€»è¿æ¥ |
|------|--------|-----------|--------|
| Auth | 1 | 50 | 50 |
| PMS | 1 | 50 | 50 |
| Member | 1 | 50 | 50 |
| å…¶ä»–æœåŠ¡ | 3 | 30 | 90 |
| **æ€»è®¡** | - | - | **240** |
| **é¢„ç•™** | - | - | 260 |

âœ… 240 < 500ï¼Œè¿æ¥æ•°å……è¶³

### QPS èƒ½åŠ›ä¼°ç®—

**å•æœºå¤šæœåŠ¡åœºæ™¯ï¼ˆ8C16Gï¼‰**ï¼š

| æœåŠ¡ | å•æœåŠ¡ QPS | è¯´æ˜ |
|------|-----------|------|
| Gateway | 2000-3000 | ä¸»è¦æ˜¯è·¯ç”±è½¬å‘ |
| Auth | 300-500 | è®¤è¯è®¡ç®—å¯†é›† |
| PMS | 300-500 | ä¸šåŠ¡é€»è¾‘ |
| Member | 300-500 | ä¸šåŠ¡é€»è¾‘ |

**æ€»ä½“èƒ½åŠ›**ï¼š
- å¦‚æœè¯·æ±‚å‡åŒ€åˆ†å¸ƒï¼š**æ€» QPS â‰ˆ 400-600**
- å¦‚æœçƒ­ç‚¹æœåŠ¡ï¼ˆå¦‚ Authï¼‰ï¼š**å—é™äºæœ€æ…¢æœåŠ¡**

### 1000 ç”¨æˆ·åœºæ™¯é‡æ–°è¯„ä¼°

```
æœŸæœ› QPS = 1000 Ã· (5 + 0.2) â‰ˆ 192 QPS
å³°å€¼ QPS = 192 Ã— 3 = 576 QPS

å•æœºèƒ½åŠ›ï¼š400-600 QPSï¼ˆå¤šæœåŠ¡å…±å­˜ï¼‰
æ‰€éœ€æœåŠ¡å™¨ï¼š2 å°ï¼ˆä¸»å¤‡ + è´Ÿè½½å‡è¡¡ï¼‰

éƒ¨ç½²æ–¹æ¡ˆï¼š
- æœåŠ¡å™¨ 1ï¼šGateway + Auth + PMS + Member
- æœåŠ¡å™¨ 2ï¼šGateway + Auth + PMS + Member
- è´Ÿè½½å‡è¡¡ï¼šNginx æˆ– ç¡¬ä»¶ LB
```

---

## ğŸ”§ ä¼˜åŒ–åçš„é…ç½®æ–‡ä»¶

### Docker Compose å®Œæ•´ç¤ºä¾‹

```yaml
version: '3.8'

services:
  # ========== ç½‘å…³æœåŠ¡ ==========
  gateway:
    image: ingot-gateway:latest
    container_name: ingot-gateway
    restart: always
    ports:
      - "8080:8080"
    networks:
      - ingot-network
    environment:
      - JAVA_OPTS=-Xms2g -Xmx2g -XX:+UseG1GC
      - SPRING_PROFILES_ACTIVE=prod
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 2560M
        reservations:
          cpus: '1.0'
          memory: 2G
    volumes:
      - /data/logs/gateway:/app/logs
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/actuator/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  
  # ========== è®¤è¯æœåŠ¡ ==========
  auth:
    image: ingot-auth:latest
    container_name: ingot-auth
    restart: always
    ports:
      - "5100:5100"
    networks:
      - ingot-network
    environment:
      - JAVA_OPTS=-Xms2g -Xmx2g -XX:+UseG1GC
      - SPRING_PROFILES_ACTIVE=prod
      - MYSQL_HOST=mysql
      - REDIS_HOST=redis
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 2560M
        reservations:
          cpus: '1.0'
          memory: 2G
    volumes:
      - /data/logs/auth:/app/logs
      - /data/ingot-data:/ingot-data
    depends_on:
      - mysql
      - redis
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5100/actuator/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  
  # ========== PMS æœåŠ¡ ==========
  pms:
    image: ingot-pms:latest
    container_name: ingot-pms
    restart: always
    ports:
      - "5200:5200"
    networks:
      - ingot-network
    environment:
      - JAVA_OPTS=-Xms2g -Xmx2g -XX:+UseG1GC
      - SPRING_PROFILES_ACTIVE=prod
      - MYSQL_HOST=mysql
      - REDIS_HOST=redis
    deploy:
      resources:
        limits:
          cpus: '1.5'
          memory: 2560M
        reservations:
          cpus: '0.5'
          memory: 2G
    volumes:
      - /data/logs/pms:/app/logs
      - /data/ingot-data:/ingot-data
    depends_on:
      - mysql
      - redis
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5200/actuator/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  
  # ========== Member æœåŠ¡ ==========
  member:
    image: ingot-member:latest
    container_name: ingot-member
    restart: always
    ports:
      - "5300:5300"
    networks:
      - ingot-network
    environment:
      - JAVA_OPTS=-Xms2g -Xmx2g -XX:+UseG1GC
      - SPRING_PROFILES_ACTIVE=prod
      - MYSQL_HOST=mysql
      - REDIS_HOST=redis
    deploy:
      resources:
        limits:
          cpus: '1.5'
          memory: 2560M
        reservations:
          cpus: '0.5'
          memory: 2G
    volumes:
      - /data/logs/member:/app/logs
      - /data/ingot-data:/ingot-data
    depends_on:
      - mysql
      - redis
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:5300/actuator/health"]
      interval: 30s
      timeout: 10s
      retries: 3
  
  # ========== MySQL ==========
  mysql:
    image: mysql:8.0
    container_name: ingot-mysql
    restart: always
    ports:
      - "3306:3306"
    networks:
      - ingot-network
    environment:
      - MYSQL_ROOT_PASSWORD=root
      - MYSQL_DATABASE=ingot
    deploy:
      resources:
        limits:
          cpus: '1.0'
          memory: 1G
        reservations:
          memory: 512M
    volumes:
      - /data/mysql:/var/lib/mysql
      - ./databases:/docker-entrypoint-initdb.d
    command:
      - --max-connections=500
      - --innodb-buffer-pool-size=512M
      - --character-set-server=utf8mb4
      - --collation-server=utf8mb4_unicode_ci
  
  # ========== Redis ==========
  redis:
    image: redis:7-alpine
    container_name: ingot-redis
    restart: always
    ports:
      - "6379:6379"
    networks:
      - ingot-network
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 512M
        reservations:
          memory: 256M
    volumes:
      - /data/redis:/data
    command: redis-server --maxmemory 400m --maxmemory-policy allkeys-lru

networks:
  ingot-network:
    driver: bridge

volumes:
  mysql-data:
  redis-data:
```

---

## ğŸ“Š ç›‘æ§å’Œè°ƒä¼˜

### èµ„æºä½¿ç”¨ç›‘æ§

```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨èµ„æºä½¿ç”¨
docker stats

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡
docker stats ingot-gateway ingot-auth ingot-pms ingot-member
```

**å¥åº·çŠ¶æ€**ï¼š
- CPU ä½¿ç”¨ç‡ï¼š< 70%
- å†…å­˜ä½¿ç”¨ç‡ï¼š< 80%
- å¦‚æœæŒç»­è¶…è¿‡é˜ˆå€¼ï¼Œè€ƒè™‘ï¼š
  1. ä¼˜åŒ–ä»£ç 
  2. å¢åŠ æœåŠ¡å™¨
  3. è°ƒæ•´èµ„æºåˆ†é…

### åŠ¨æ€è°ƒæ•´èµ„æº

```bash
# ä¸´æ—¶å¢åŠ å†…å­˜é™åˆ¶
docker update --memory=3g --memory-swap=3g ingot-pms

# ä¸´æ—¶å¢åŠ  CPU é™åˆ¶
docker update --cpus=2.0 ingot-pms
```

---

## ğŸ¯ ä¸åŒè§„æ¨¡çš„éƒ¨ç½²æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šå°è§„æ¨¡ï¼ˆ< 500 ç”¨æˆ·ï¼‰
**1 å°æœåŠ¡å™¨ï¼ˆ8C16Gï¼‰**
```
Gateway + Auth + PMS + Member + MySQL + Redis
```

### æ–¹æ¡ˆ 2ï¼šä¸­ç­‰è§„æ¨¡ï¼ˆ500-1500 ç”¨æˆ·ï¼‰âœ… **æ¨è**
**2 å°åº”ç”¨æœåŠ¡å™¨ï¼ˆ8C16Gï¼‰+ 1 å°æ•°æ®åº“æœåŠ¡å™¨**
```
åº”ç”¨æœåŠ¡å™¨ 1/2ï¼šGateway + Auth + PMS + Member
æ•°æ®åº“æœåŠ¡å™¨ï¼šMySQL + Redis
è´Ÿè½½å‡è¡¡ï¼šNginx
```

### æ–¹æ¡ˆ 3ï¼šå¤§è§„æ¨¡ï¼ˆ> 1500 ç”¨æˆ·ï¼‰
**æœåŠ¡åˆ†ç¦»éƒ¨ç½²**
```
ç½‘å…³æœåŠ¡å™¨ Ã— 2ï¼šGateway
ä¸šåŠ¡æœåŠ¡å™¨ Ã— 2ï¼šAuth + PMS + Member
æ•°æ®åº“æœåŠ¡å™¨ Ã— 1ï¼šMySQLï¼ˆä¸»ä»ï¼‰
ç¼“å­˜æœåŠ¡å™¨ Ã— 1ï¼šRedisï¼ˆå“¨å…µ/é›†ç¾¤ï¼‰
```

---

## ğŸš¨ æ³¨æ„äº‹é¡¹

### 1. é¿å…èµ„æºäº‰æŠ¢

âŒ **é”™è¯¯åšæ³•**ï¼š
```yaml
# æ‰€æœ‰æœåŠ¡éƒ½é…ç½® -Xmx6gï¼Œä¼šå¯¼è‡´ OOM
pms:
  environment:
    - JAVA_OPTS=-Xmx6g
member:
  environment:
    - JAVA_OPTS=-Xmx6g
```

âœ… **æ­£ç¡®åšæ³•**ï¼š
```yaml
# æ ¹æ®æœåŠ¡å™¨æ€»å†…å­˜åˆç†åˆ†é…
pms:
  environment:
    - JAVA_OPTS=-Xmx2g
  deploy:
    resources:
      limits:
        memory: 2560M
```

### 2. æ•°æ®åº“è¿æ¥æ•°

ç¡®ä¿æ‰€æœ‰æœåŠ¡çš„è¿æ¥æ•°ä¹‹å’Œä¸è¶…è¿‡ MySQL çš„ `max_connections`ï¼š

```sql
-- è®¾ç½® MySQL æœ€å¤§è¿æ¥æ•°
SET GLOBAL max_connections = 500;

-- æŸ¥çœ‹å½“å‰è¿æ¥æ•°
SHOW STATUS LIKE 'Threads_connected';
```

### 3. ç«¯å£ç®¡ç†

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| Gateway | 8080 | å¯¹å¤–ç»Ÿä¸€å…¥å£ |
| Auth | 5100 | å†…éƒ¨æœåŠ¡ |
| PMS | 5200 | å†…éƒ¨æœåŠ¡ |
| Member | 5300 | å†…éƒ¨æœåŠ¡ |
| MySQL | 3306 | æ•°æ®åº“ |
| Redis | 6379 | ç¼“å­˜ |

### 4. æ—¥å¿—ç®¡ç†

```bash
# æ¯ä¸ªæœåŠ¡ç‹¬ç«‹æ—¥å¿—ç›®å½•
/data/logs/
â”œâ”€â”€ gateway/
â”œâ”€â”€ auth/
â”œâ”€â”€ pms/
â””â”€â”€ member/

# å®šæœŸæ¸…ç†æ—¥å¿—
find /data/logs -name "*.log" -mtime +30 -delete
```

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### ä¼˜å…ˆçº§ 1ï¼šé«˜ä¼˜å…ˆçº§

1. **å¯ç”¨æœåŠ¡é—´ç¼“å­˜**
   - Redis ç¼“å­˜çƒ­ç‚¹æ•°æ®
   - æœ¬åœ°ç¼“å­˜ï¼ˆCaffeineï¼‰å‡å°‘ Redis è°ƒç”¨

2. **æ•°æ®åº“ä¼˜åŒ–**
   - æ·»åŠ ç´¢å¼•
   - ä¼˜åŒ–æ…¢ SQL
   - ä½¿ç”¨è¿æ¥æ± 

3. **å¼‚æ­¥å¤„ç†**
   - éå…³é”®ä¸šåŠ¡å¼‚æ­¥åŒ–
   - ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆRabbitMQ/Kafkaï¼‰

### ä¼˜å…ˆçº§ 2ï¼šä¸­ä¼˜å…ˆçº§

1. **æœåŠ¡åˆ†ç¦»**
   - é«˜é¢‘æœåŠ¡ç‹¬ç«‹éƒ¨ç½²
   - è¯»å†™åˆ†ç¦»

2. **ç½‘å…³ä¼˜åŒ–**
   - é™æµé™çº§
   - ç†”æ–­æœºåˆ¶

3. **ç›‘æ§å‘Šè­¦**
   - Prometheus + Grafana
   - åŠæ—¶å‘ç°é—®é¢˜

### ä¼˜å…ˆçº§ 3ï¼šä½ä¼˜å…ˆçº§

1. **JVM å‚æ•°å¾®è°ƒ**
2. **å®¹å™¨å‚æ•°ä¼˜åŒ–**
3. **ä»£ç å±‚é¢ä¼˜åŒ–**

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [æ•…éšœæ’æŸ¥æŒ‡å—](./TROUBLESHOOTING-SERVICE-HANG.md)
- [é…ç½®ç¤ºä¾‹](./config-examples/README.md)
- [å¿«é€Ÿå‚è€ƒ](./QUICK-REFERENCE-TROUBLESHOOTING.md)

---

**æœ€åæ›´æ–°**ï¼š2025-12-24  
**ç‰ˆæœ¬**ï¼šv1.0  
**é€‚ç”¨åœºæ™¯**ï¼šå¾®æœåŠ¡æ¶æ„ï¼Œå•æœºå¤šæœåŠ¡éƒ¨ç½²

